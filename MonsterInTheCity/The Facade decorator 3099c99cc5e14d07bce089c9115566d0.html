<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>The Facade decorator</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="3099c99c-c5e1-4d07-bce0-89c9115566d0" class="page sans"><header><h1 class="page-title">The Facade decorator</h1></header><div class="page-body"><p id="11d3394f-5b3b-486f-ba49-397a42f4c140" class="">Here is the process for the creation of the city environment.</p><nav id="00329af5-18e1-42cd-ae4f-384c8b34456a" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#64c42a47-19fc-49d9-8346-ee0a56b5946c">Step 1 : Getting the data</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b096391e-17f1-4dae-837e-429eaeda221a">Geographic data</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#197913fe-82cb-4d5e-9aa0-4c2e3f49277b">Building modules</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#9c7fae22-0bbd-4f0f-931a-77a654ae67d4">Step 2 : Preparing the data</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#d6a5cd73-81b2-40f8-9fea-685887ba419a">Step 3 : Placing the modules</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#ef6f8566-f3e8-44c7-8647-e8aac5dd4d18">Flat modules</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#fa101b19-19ea-4ae8-98e9-42487b0ece92">Corners</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#82984903-8731-4ba0-a9fa-95d09998ebaf">The trims</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#eaac6041-cc8e-4e1d-a84e-ffc30d298f9b">Putting it all together</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#6409def6-d90a-40ad-a7d8-3cc23513a5ec">The final result</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#c5f12e5e-05f6-4cb1-99af-82c1475a46ac">Additional notes</a></div></nav><h1 id="64c42a47-19fc-49d9-8346-ee0a56b5946c" class="">Step 1 : Getting the data</h1><p id="e74bc287-c713-402f-9ba6-214f1572cfac" class="">For this environment we need two things : geographic data and building modules.</p><h2 id="b096391e-17f1-4dae-837e-429eaeda221a" class="">Geographic data</h2><p id="6300cff7-98a6-491d-a8c4-fd9eb1a0f3ba" class="">The geographic data is essentially a block-out of the city :</p><figure id="e23234ed-e251-445e-ba50-e452384f03ce" class="image"><a href="Untitled.png"><img style="width:336px" src="Untitled.png"/></a></figure><p id="5d6769ec-5d5a-4f35-881e-6b0d15d45081" class="">Using <a href="https://www.openstreetmap.org/export#map=16/38.8961/-77.0293">Open Street Map</a>, I was able to export a region of Washington D.C. Then using the node “osm_buildings” from Houdini’s labs, I was able to recreate the basic geometry that you see above.</p><h2 id="197913fe-82cb-4d5e-9aa0-4c2e3f49277b" class="">Building modules</h2><p id="e9d053de-68b4-4f7b-9b86-5d810480953e" class="">As the objective was to create a facade decorator, I used some of <a href="https://quixel.com/megascans">Quixel Megascans</a>’s building modules :</p><figure id="e96ae698-3092-4c85-9d51-b5d8d13009b8" class="image"><a href="Untitled%201.png"><img style="width:1446px" src="Untitled%201.png"/></a><figcaption>All the modules used in this project. All of them are coming from quixel megascans.</figcaption></figure><p id="31903dab-1f25-4120-928e-5f5dff83a6e1" class="">It is worth noting that I used a level 5 Lod, this brings the total poly count of all these modules at 40,000 polys.</p><p id="b2a160db-9647-492d-b37d-b4ea50a85ee9" class="">
</p><h1 id="9c7fae22-0bbd-4f0f-931a-77a654ae67d4" class="">Step 2 : Preparing the data</h1><p id="8ef37680-01c7-46c8-b1f3-62c5aa457c60" class="">For the modules to work together and fit properly, we need to prepare them. We need proper naming, so Houdini can recognise the modules as they are. </p><p id="0cb90bc1-9323-4a37-a2cf-0e5a855a99e3" class="">The modules are split into 6 categories :</p><ul id="f0e4fb6e-2ee6-4a75-a386-be817844079a" class="bulleted-list"><li style="list-style-type:disc">bottom, all the flat modules that are in contact with ground</li></ul><ul id="70f6181a-8a1b-48ee-ace3-c9bd238162d7" class="bulleted-list"><li style="list-style-type:disc">bottom_corner, all the modules that make the corners of the bottom modules</li></ul><ul id="8c1e0215-c4fe-4964-981d-059a2b78eb71" class="bulleted-list"><li style="list-style-type:disc">window, all the flat modules that are not in contact with the ground</li></ul><ul id="7f188e1b-47a5-477f-b721-7046c648d2a0" class="bulleted-list"><li style="list-style-type:disc">window_corner, all the modules that make the corners of the window modules</li></ul><ul id="89cba67d-6a43-44b9-847a-7cd1086411ce" class="bulleted-list"><li style="list-style-type:disc">trim, all the modules that make the trims</li></ul><ul id="944f05c5-588a-4d96-8a4d-e80a8e264ff8" class="bulleted-list"><li style="list-style-type:disc">top, all the modules that make the top trims</li></ul><p id="f1089f01-567d-47c9-8fb3-5d097f1730f4" class="">We also need to measure the width, max width of the bottom and window group for placement later. I’m also adding a random colour to each module for better visualisation.</p><p id="4c132e11-f177-4e10-b67b-1a19593582ef" class="">This is the job of this node network :</p><figure id="19e8c511-62f3-4db5-b702-e2de859fe004" class="image" style="text-align:center"><a href="Untitled%202.png"><img style="width:491px" src="Untitled%202.png"/></a><figcaption>This is the node network in charge of preparing modules</figcaption></figure><p id="c5c6f83c-8391-4af7-be15-6ec64dab024e" class="">For each building category we need to prepare them individually :</p><figure id="d045714f-261f-4004-834d-de5437a89993" class="image"><a href="Untitled%203.png"><img style="width:757px" src="Untitled%203.png"/></a></figure><p id="fd76840c-55c0-4520-b43b-def30e0665e1" class="">As you can see, we have 4 different types of buildings.</p><h1 id="d6a5cd73-81b2-40f8-9fea-685887ba419a" class="">Step 3 : Placing the modules</h1><p id="95324511-43db-4442-863e-62a9f11f39f9" class="">This was one of the hardest part of this project. The purpose of this step is to place every modules onto the facade, this seems simple but there are multiple problems.</p><h2 id="ef6f8566-f3e8-44c7-8647-e8aac5dd4d18" class="">Flat modules</h2><div id="bbbbdf4d-32ce-4b9a-9cc5-7be8ca1f598c" class="column-list"><div id="690feaa1-463b-4647-a0fd-081422ba3fc5" style="width:50%" class="column"><p id="09c04827-6566-47e5-a260-e8b73d3f2697" class="">This node network is in charge of placing the modules on a building.</p><p id="9608b831-b01c-4d77-929e-c7ffcafc27d5" class="">It first calculates the normals of the primitive given, then deletes the top, to get only the footprint of the building.</p><p id="f1b33f72-3a48-4ee6-aac6-329575f1ec3e" class="">There is a bit of a problem with vertex order as the last face would essentially get it’s vertex flipped we need to take care of that</p><p id="f7e51c1d-091b-40de-89a7-47518d8bbc33" class="">Then two “Attribute Wrangle” create the necessary points, and scale accordingly, here are the vex snippets <a href="Annex%20b2f6972d0a964fca8f49aef91acc67ec.html">for the point creation</a>.</p><p id="30e10b4e-89f0-4d75-a9b9-c2ffd3b52087" class="">After all this we get :</p><figure id="6b7b36e0-0efa-49c8-86ea-c0820aba5304" class="image"><a href="Untitled%204.png"><img style="width:720px" src="Untitled%204.png"/></a><figcaption>Nice flat modules placed properly</figcaption></figure><p id="f97ffd98-f1d4-4560-9cef-edea4d5280da" class="">This seemingly simple node setup took me roughly 2 weeks or so of work and countless iterations.</p><p id="34e49c44-1895-4242-bf53-070d0b28e14a" class="">Here is a snapshot of previous simpler iterations.</p><figure id="e3bd3fe6-953b-4e59-a643-8f27a7208287" class="image"><a href="Untitled%205.png"><img style="width:1232px" src="Untitled%205.png"/></a><figcaption>Previous iterations</figcaption></figure><p id="f2b14e95-52e2-494f-aa53-d62f15929c10" class="">
</p></div><div id="1548ef14-b52e-40ad-9ac0-611c134c2121" style="width:50%" class="column"><figure id="5bd77d63-751a-413d-b005-1c03173308fe" class="image"><a href="Untitled%206.png"><img style="width:352px" src="Untitled%206.png"/></a><figcaption>The node network for the modules placer</figcaption></figure><p id="90f13889-d063-4bc1-a059-3406a7ca4b4c" class="">
</p></div></div><p id="03affa4e-9a0f-41ed-82ea-b84cfe92124b" class="">But all these iterations were lacking control, features and were overall not good.</p><h2 id="fa101b19-19ea-4ae8-98e9-42487b0ece92" class="">Corners</h2><p id="69475e71-34b7-4af5-a11f-70abffbaf95d" class="">The corners were also very tricky because of the previously mentioned vertex order problem. But I managed to overcome all problems and get a working setup.</p><div id="0f8d48af-043f-4182-8bc1-26ed6b888388" class="column-list"><div id="dc46fbb6-5456-4cc0-ac4e-855101bff3e9" style="width:50%" class="column"><p id="c9c9cad5-f13b-4be8-a30b-1e15954cf752" class="">Here is the setup :</p><p id="95ec67bf-8938-44d7-af65-ad95e8cd7049" class="">The central piece of this node setup is the “mark concave points” node it is a mix of three vex code for finding concave and convex points :</p><ul id="5f3e2439-50f3-468f-913f-8536b2ffe10c" class="bulleted-list"><li style="list-style-type:disc">The mark concave points from rich_lord’s amazing <a href="https://richlord.gumroad.com/l/mathcollection">Houdini: math collection</a></li></ul><ul id="a9694cdc-bf0b-447c-9ca3-8a271114d8fd" class="bulleted-list"><li style="list-style-type:disc">The “group_curve_corners” from houdini’s labs nodes</li></ul><ul id="9f8c47c2-2561-413c-ae0f-45c5effbfbb8" class="bulleted-list"><li style="list-style-type:disc">And finally my own code to make every thing work as intended</li></ul><p id="5cf0ed23-9891-4727-9062-521d25ee7743" class=""><a href="Annex%20b2f6972d0a964fca8f49aef91acc67ec.html">Here </a>is the vex snippet</p><p id="70daabce-68ad-4fb9-b7e3-33076e2c59d0" class="">In the end we get nicely placed corners that respect the concave and convex orientation of the faces of the building.</p><figure id="cd622b4e-e9c1-4692-b1c7-0b7a677cd28c" class="image"><a href="Untitled%207.png"><img style="width:1091px" src="Untitled%207.png"/></a><figcaption>The corners placed properly</figcaption></figure><p id="0646f702-0d78-4e52-a560-c7b64ffa5d99" class="">
</p></div><div id="01dd5e46-c11d-4798-8523-4aa2590456b2" style="width:50%" class="column"><figure id="357b7c55-39e8-4baa-a459-88061c4279e9" class="image"><a href="Untitled%208.png"><img style="width:349px" src="Untitled%208.png"/></a><figcaption>The node network for the corners placer</figcaption></figure></div></div><h2 id="82984903-8731-4ba0-a9fa-95d09998ebaf" class="">The trims</h2><p id="f9d093db-28ef-4057-bb92-23ccb997cb07" class="">The trims are pretty straight forward, they are made from the flat modules placer and the corner placer all in one as we don’t need variations. Here is the node setup :</p><figure id="5432a998-44b8-4eac-946c-e264d6c62eac" class="image"><a href="Untitled%209.png"><img style="width:495px" src="Untitled%209.png"/></a><figcaption>The node network for the trim placer</figcaption></figure><h2 id="eaac6041-cc8e-4e1d-a84e-ffc30d298f9b" class="">Putting it all together</h2><p id="6c85e0a5-0cb3-4b23-8ea8-31029bbb06e7" class="">It’s very straight forward so I’m not going to elaborate much.</p><p id="e2090726-45b6-4e58-96de-5b69c959081e" class="">Here is the node network for putting everything together :</p><figure id="d157b9d6-5006-4717-a7f4-bc6e88a0f14b" class="image"><a href="Untitled%2010.png"><img style="width:877px" src="Untitled%2010.png"/></a><figcaption>Putting everything together</figcaption></figure><figure id="ce60fc44-2430-4da9-afb5-7d98a030468a" class="image"><a href="Untitled%2011.png"><img style="width:1805px" src="Untitled%2011.png"/></a></figure><h1 id="6409def6-d90a-40ad-a7d8-3cc23513a5ec" class="">The final result</h1><p id="862023d0-3dcf-4cba-9309-d94fe533bd35" class="">I’m happy with the result but the overall scene lacks the decoration it deserves.</p><p id="aea38d47-b7af-40d1-bc30-a3f32e4cd97c" class="">Anyway here are a few renders :</p><figure id="c96b1871-abc3-4676-9bc9-90066b69bba3" class="image"><a href="Untitled.jpeg"><img style="width:1920px" src="Untitled.jpeg"/></a></figure><figure id="e3eb961d-44d8-46a2-b520-f9bb98a3456b" class="image"><a href="Untitled%201.jpeg"><img style="width:1920px" src="Untitled%201.jpeg"/></a></figure><figure id="ba2e1c24-ce82-4922-9e32-118fc21d4c60" class="image"><a href="Untitled%202.jpeg"><img style="width:1920px" src="Untitled%202.jpeg"/></a></figure><figure id="c61189ad-49c2-4655-a968-f81487c5d443" class="image"><a href="Untitled%203.jpeg"><img style="width:1920px" src="Untitled%203.jpeg"/></a></figure><h1 id="c5f12e5e-05f6-4cb1-99af-82c1475a46ac" class="">Additional notes</h1><p id="6cf97ac6-5985-4ef0-b4a8-d9c9153823d9" class="">This node network is overall pretty performant. It takes less than 2 seconds to generate the 48 buildings in this city. It could be optimized further, but I didn&#x27;t really bother because the performance is already pretty good.</p><p id="68bd15bd-a619-4341-82ba-7853af05a40f" class="">Plenty of the random function in this node network are actually <code>nrandom()</code> , this has a negative impact on performances and makes the city not controlled by a global seed. This means every time you do a change (of any kind) on the network this will cause the city to regenerate and be different every time.</p><p id="c363f54f-a8ed-45ca-8dfd-81ada37c3281" class="">To export the instantiated geo to Blender I had to write my own script as blender does not support instantiated geometry, it will import it, just not as instances. Here is my script :</p><figure id="b1e4b87a-4209-4809-95e3-4504f1027b6a"><div class="source"><a href="https://gist.github.com/Gus-The-Forklift-Driver/23646c8cce64d4cdfe61467da64853c0">https://gist.github.com/Gus-The-Forklift-Driver/23646c8cce64d4cdfe61467da64853c0</a></div></figure><p id="10975763-be0f-4e0b-a165-525a7ff4f779" class="">
</p></div></article></body></html>